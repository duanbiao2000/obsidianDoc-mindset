

| 层级 | 名称 | 在笔记 [[以任务为中心的潜在行动]] 中的体现 |
| :--- | :--- | :--- |
| **L4: 应用层** | 表现与目标 | **具体应用场景**: 开发者平台、数据监控、博客系统、商业CRM等。目标是减少用户操作的“认知跳转”，提升任务完成效率，实现类似GitHub Copilot的流畅体验。 |
| **L3: 工具层** | 实施与自动化 | **技术与实现**: 将潜在行动模型化为`JSON schema`，利用`微前端 + Copilot驱动界面`进行呈现。以`GitHub Copilot`, `Notion AI`, `Linear AI`为标杆案例。 |
| **L2: 策略层** | 方法与技巧 | **核心模型**: 提出“三层任务行为链” (`任务 → 上下文感知 → 潜在操作推导 → 可执行行为呈现`) 作为技术落地模型。 |
| **L1: 原理层** | 科学与规律 | **设计原理**: 强调**上下文解耦 + 意图识别 + 异步推荐**。核心是“异步推理/自动触发”，即“auto-complete for tasks”。 |
| **L0: 哲学层** | 理念与心态 | **核心理念**: 从“功能中心 (Feature-centric)”转向“**以任务为中心 (Task-centric)**”，将“用户思维第一性”作为系统设计的根本出发点。 |

---

将“以任务为中心的潜在行动”模型化为 JSON Schema，意味着我们定义一个标准化的数据结构来描述这些行动。这使得系统（无论是前端UI还是后端AI Agent）都能理解和处理它们。

以下是一个示例，结合了 Schema 定义和一个具体的应用实例。

---

### 1. JSON Schema 定义 (`potential-action.schema.json`)

这个文件定义了“一个潜在行动”应该具备哪些字段和数据类型。

```json
{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Potential Task-Centric Action",
  "description": "Defines the structure for a single suggested action based on user task and context.",
  "type": "object",
  "properties": {
    "id": {
      "type": "string",
      "description": "A unique identifier for the action, e.g., 'action-view-error-logs'."
    },
    "displayName": {
      "type": "string",
      "description": "The human-readable text to be displayed on a button or in a menu."
    },
    "description": {
      "type": "string",
      "description": "An optional, more detailed explanation of what the action does."
    },
    "actionType": {
      "type": "string",
      "enum": ["NAVIGATION", "API_CALL", "COMMAND", "UI_UPDATE"],
      "description": "The category of the action, determining how it should be executed."
    },
    "confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "A score indicating the system's confidence in this suggestion's relevance."
    },
    "payload": {
      "type": "object",
      "description": "The data required to execute the action.",
      "properties": {
        "url": { "type": "string" },
        "apiEndpoint": { "type": "string" },
        "apiMethod": { "type": "string", "enum": ["GET", "POST", "PUT", "DELETE"] },
        "apiBody": { "type": "object" },
        "commandName": { "type": "string" },
        "commandArgs": { "type": "array" }
      }
    }
  },
  "required": ["id", "displayName", "actionType", "payload"]
}
```

### 2. 具体应用实例 (JSON 数据)

假设在一个**数据监控平台**，用户正在查看服务 `auth-service` 的仪表盘，该服务最近出现了频繁重启。系统根据这个上下文，推导出了以下一系列潜在行动：

```json
{
  "context": {
    "task": "Investigate service instability",
    "service": "auth-service"
  },
  "potentialActions": [
    {
      "id": "action-view-pod-logs-auth",
      "displayName": "查看Pod错误日志",
      "description": "跳转到日志系统，并筛选出 'auth-service' 最近1小时的ERROR级别日志。",
      "actionType": "NAVIGATION",
      "confidence": 0.95,
      "payload": {
        "url": "/logs?filter=service:auth-service&level=ERROR&time=1h"
      }
    },
    {
      "id": "action-query-restarts-promql",
      "displayName": "复制Pod重启查询语句",
      "description": "将查询 'auth-service' Pod重启次数的PromQL语句复制到剪贴板。",
      "actionType": "COMMAND",
      "confidence": 0.80,
      "payload": {
        "commandName": "copyToClipboard",
        "commandArgs": [
          "sum(kube_pod_container_status_restarts_total{pod=~'auth-service-.*'}) by (pod)"
        ]
      }
    },
    {
      "id": "action-create-temp-alert",
      "displayName": "创建临时重启告警",
      "description": "创建一个持续2小时的告警，当服务重启时通过Slack通知。",
      "actionType": "API_CALL",
      "confidence": 0.75,
      "payload": {
        "apiEndpoint": "/api/v1/alerts",
        "apiMethod": "POST",
        "apiBody": {
          "name": "Temp Alert for auth-service restarts",
          "service": "auth-service",
          "metric": "restarts",
          "duration": "2h",
          "notify": "slack"
        }
      }
    }
  ]
}
```

### 核心价值

- **解耦**: 后端系统（或AI Agent）只负责生成这个标准化的JSON。
- **前端渲染**: 前端UI接收到这个JSON后，可以动态渲染出一组按钮或一个命令面板，而无需关心背后的业务逻辑。
- **Agent可消费**: 未来的AI Agent可以直接读取这个JSON，并根据`confidence`和`actionType`自主决定执行哪个行动，实现了“以任务为中心的自动化”。